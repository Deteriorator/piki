<!DOCTYPE html>
<html lang="null" class="">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?b61be6d6c858750498d5a159406ba567";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);

            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s); 
        })();
    </script>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
        <meta content="yes" name="apple-mobile-web-app-capable">
        <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
        <meta content="telephone=no" name="format-detection">
        <meta name="description">
        <title>Forgetwall - {{ wiki[1] }}</title>
        <link rel="stylesheet" type="text/css" href="{{ static_url('css/style.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ static_url('css/github-markdown.css') }}">
        <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css">
        <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css">
        <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css">
        <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
        <style type="text/css"></style>
        <link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico">
        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png">
        <style type="text/css">.fancybox-margin{margin-right:15px;}</style>
    </head>
    <body>
        <div class="body_container">
            <div id="header">
                <div class="site-name">
                    <h1 class="hidden">{{ wiki[1] }}</h1>
                    <a id="logo" href="/.">Forgetwall</a>
                    <p class="description">Write it down and forget</p>
                </div>
                <div id="nav-menu">
                    <a href="/." class="current"><i class="fa fa-home"> Home</i></a>
                    <!--
                    <a href="/archives/"><i class="fa fa-archive"> Archive</i></a>
                    <a href="/about/"><i class="fa fa-user"> About</i></a>
                    <a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a>
                    -->
                </div>
            </div>
        <div id="layout" class="pure-g">
            <div class="pure-u-1 pure-u-md-3-4">
                <div class="content_container">
                    <div class="post">
                        <h1 class="post-title">{{ wiki[1] }}</h1>
                        <div class="post-meta">{{ wiki[5] }}
                            <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async=""></script>
                            <span id="busuanzi_container_page_pv" style="display: inline;"> | <span id="busuanzi_value_page_pv">2</span>
                                <span> Hits</span></span> | <a href="/{{ path }}?m=edit">编辑</a>
                        </div>
                        <div class="clear">
                            <div id="toc" class="toc-article">
                                <div class="toc-title">Contents</div>
                                </div>
                            </div>
                            <input type="hidden" id="doc" value="{{doc}}"></input>
                            <div class="post-content markdown-body" id="post-content">
                            </div>
                            <script type="text/javascript" src="{{ static_url('js/share.js') }}" async=""></script>
                            <a data-url="http://www.forgetwall.com/{{ wiki[6] }}" data-id="cinimewmq0000hwulq42ug5kj" class="article-share-link">Share</a>
                            <div class="tags"></div>
                            <div class="post-nav"><a href="/" class="next">首页</a></div>

                            </div></div></div>
                            <div class="pure-u-1-4">
                                <div id="sidebar">
                                <div class="widget">
                                    <form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form">
                                        <input type="text" name="q" maxlength="20" placeholder="Search">
                                        <input type="hidden" name="sitesearch" value="http://yoursite.com">
                                    </form>
                                </div>
                                <div class="widget">
                                    <div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div>
                                    <ul class="category-list">
                                        {% for header in handler.settings['headers'] %}
                                            <li class="category-list-item">
                                                <a class="category-list-link" href="{{ header[1] }}">{{ header[0] }}</a>
                                            </li>
                                        {% end %}
                                    </ul>
                                </div>
                                <div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div>
                                <div class="widget">
                                    <div class="widget-title"><i class="fa fa-file-o"> Recent</i></div>
                                    <ul class="post-list">
                                        {% for item in news %}
                                            <li><a class="post-list-link" href="/{{ item[3] }}">{{ item[1] }}</a></li>
                                        {% end %}
                                    </ul>
                                </div>
                                <!--
                                <div class="widget">
                                    <div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div>
                                    <ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a>
                                    <ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a>
                                    <ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a>
                                </div>
                                -->
                            </div>
                        </div>
                        <div class="pure-u-1 pure-u-md-3-4">
                            <div id="footer">
                                © <a href="/." rel="nofollow">Forgetwall.</a>
                                Powered by<a rel="nofollow" target="_blank" href="/">Piki.</a>
                                <a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a>
                                by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a>
                                <a href="http://www.miitbeian.gov.cn">豫ICP备16003718号</a>
                    </div></div></div>
            <a id="rocket" href="#top" class=""></a>
            <script type="text/javascript" src="{{ static_url('js/totop.js') }}" async=""></script>
            <script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async=""></script>
            <script type="text/javascript" src="{{ static_url('js/fancybox.js') }}" async=""></script>
            <link rel="stylesheet" type="text/css" href="{{ static_url('css/jquery.fancybox.css') }}">
            <script type="text/javascript" src="{{ static_url('js/codeblock-resizer.js') }}"></script>
            <script type="text/javascript" src="{{ static_url('js/smartresize.js') }}"> </script>
        </div>
    </body>
</html>

<script type="text/javascript" src="{{ static_url('js/marked.js') }}"></script>
<script>
    //var pcontent = document.getElementById("post-content").innerHTML
    var doc = document.getElementById("doc").value;

    // See
  // https://github.com/chjj/marked/issues/545#issuecomment-74505539
  var toc = [];
  var renderer = (function() {
    var renderer = new marked.Renderer();
    renderer.heading = function(text, level, raw) {
      var anchor = this.options.headerPrefix + raw.toLowerCase().replace(/[^\w]+/g, '-');
      toc.push({
        anchor: anchor,
        level: level,
        text: text
      });
      return '<h'
      + level
      + ' id="'
      + anchor
      + '">'
      + text
      + '</h'
      + level
      + '>\n'
      + '<a href="#toc"><a>\n';
    };
    return renderer;
  })();

  marked.setOptions({
    renderer: renderer,
    gfm: true,
    tables: true,
    breaks: false,
    pedantic: false,
    sanitize: false,
    smartLists: true,
    smartypants: false
  });

    var html = marked(doc);
    var toc_html = '<div class="toc-title">Contents</div><ol class="toc">'
    toc.forEach(function (entry) {
        toc_html += '<li class="toc-item toc-level-2"><a class="toc-link" href="#'+entry.anchor+'">'+entry.text+'<a></li>\n';
    });

    toc_html += '</ol></div>';
    document.getElementById("post-content").innerHTML = html;
    document.getElementById("toc").innerHTML = toc_html;
</script>
